clear all;
clc;
figure(1); hold on;
A0 = [3;2;1];
B0 = [3;4;1];
C0 = [4;4;1];
D0 = [4;3;1];
E0 = [5;3;1];
F0 = [5;4;1];
G0 = [6;4;1];
H0 = [6;2;1];
plot([A0(1) B0(1) C0(1) D0(1) E0(1) F0(1) G0(1) H0(1) A0(1)],[A0(2) B0(2) C0(2) D0(2) E0(2) F0(2) G0(2) H0(2) A0(2)]);

A1 = ([1, 0, -2; 0, 1, -1;0, 0, 1]*A0);
B1 = ([1, 0, -2; 0, 1, -1;0, 0, 1]*B0);
C1 = ([1, 0, -2; 0, 1, -1;0, 0, 1]*C0);
D1 = ([1, 0, -2; 0, 1, -1;0, 0, 1]*D0);
E1 = ([1, 0, -2; 0, 1, -1;0, 0, 1]*E0);
F1 = ([1, 0, -2; 0, 1, -1;0, 0, 1]*F0);
G1 = ([1, 0, -2; 0, 1, -1;0, 0, 1]*G0);
H1 = ([1, 0, -2; 0, 1, -1;0, 0, 1]*H0);
plot([A1(1) B1(1) C1(1) D1(1) E1(1) F1(1) G1(1) H1(1) A1(1)],[A1(2) B1(2) C1(2) D1(2) E1(2) F1(2) G1(2) H1(2) A1(2)]);

A2 = ([1, 0, 0;0, -1,0;0, 0, 1]*A1);
B2 = ([1, 0, 0;0, -1,0;0, 0, 1]*B1);
C2 = ([1, 0, 0;0, -1,0;0, 0, 1]*C1);
D2 = ([1, 0, 0;0, -1,0;0, 0, 1]*D1);
E2 = ([1, 0, 0;0, -1,0;0, 0, 1]*E1);
F2 = ([1, 0, 0;0, -1,0;0, 0, 1]*F1);
G2 = ([1, 0, 0;0, -1,0;0, 0, 1]*G1);
H2 = ([1, 0, 0;0, -1,0;0, 0, 1]*H1);
plot([A2(1) B2(1) C2(1) D2(1) E2(1) F2(1) G2(1) H2(1) A2(1)],[A2(2) B2(2) C2(2) D2(2) E2(2) F2(2) G2(2) H2(2) A2(2)]);

A3 = ([.7,0,.3;0,.7,-.3;0,0,1]*A2);
B3 = ([.7,0,.3;0,.7,-.3;0,0,1]*B2);
C3 = ([.7,0,.3;0,.7,-.3;0,0,1]*C2);
D3 = ([.7,0,.3;0,.7,-.3;0,0,1]*D2);
E3 = ([.7,0,.3;0,.7,-.3;0,0,1]*E2);
F3 = ([.7,0,.3;0,.7,-.3;0,0,1]*F2);
G3 = ([.7,0,.3;0,.7,-.3;0,0,1]*G2);
H3 = ([.7,0,.3;0,.7,-.3;0,0,1]*H2);
plot([A3(1) B3(1) C3(1) D3(1) E3(1) F3(1) G3(1) H3(1) A3(1)],[A3(2) B3(2) C3(2) D3(2) E3(2) F3(2) G3(2) H3(2) A3(2)]);

A4 = ([sqrt(2)/2,-sqrt(2)/2,2-sqrt(2);sqrt(2)/2,sqrt(2)/2,-sqrt(2);0,0,1]*A3);
B4 = ([sqrt(2)/2,-sqrt(2)/2,2-sqrt(2);sqrt(2)/2,sqrt(2)/2,-sqrt(2);0,0,1]*B3);
C4 = ([sqrt(2)/2,-sqrt(2)/2,2-sqrt(2);sqrt(2)/2,sqrt(2)/2,-sqrt(2);0,0,1]*C3);
D4 = ([sqrt(2)/2,-sqrt(2)/2,2-sqrt(2);sqrt(2)/2,sqrt(2)/2,-sqrt(2);0,0,1]*D3);
E4 = ([sqrt(2)/2,-sqrt(2)/2,2-sqrt(2);sqrt(2)/2,sqrt(2)/2,-sqrt(2);0,0,1]*E3);
F4 = ([sqrt(2)/2,-sqrt(2)/2,2-sqrt(2);sqrt(2)/2,sqrt(2)/2,-sqrt(2);0,0,1]*F3);
G4 = ([sqrt(2)/2,-sqrt(2)/2,2-sqrt(2);sqrt(2)/2,sqrt(2)/2,-sqrt(2);0,0,1]*G3);
H4 = ([sqrt(2)/2,-sqrt(2)/2,2-sqrt(2);sqrt(2)/2,sqrt(2)/2,-sqrt(2);0,0,1]*H3);
plot([A4(1) B4(1) C4(1) D4(1) E4(1) F4(1) G4(1) H4(1) A4(1)],[A4(2) B4(2) C4(2) D4(2) E4(2) F4(2) G4(2) H4(2) A4(2)]);
axis([0 7 -4 5]);
xlabel("x-axis");
ylabel("y-axis");
title("Problem 3");
legend("Original","Step 1","Step 2","Step 3","Step 4");